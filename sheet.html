<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sheet - Shaman King RPG</title>
    <style>
        .principal *{
            box-sizing: border-box;
        }

        .principal table{
            width: 100%;
            text-align: center;
            border: solid 1px #ccc;
            font-size: 14px;
        }

        .principal tbody tr:nth-child(even){
            background: #ebebeb;
        }

        .principal thead tr:nth-child(odd){
            background: #ccc;
        }
        .principal td{
            padding: 10px;
        }
        .principal{
            display: flex;
            justify-content: left;
            align-items: center;
            flex-wrap: wrap !important;
            padding: 15px;
            background: #e9e9e9 !important;
        }

        .principal .repitem select, .principal .repitem textarea {
            margin-bottom: 0;
        }

        .principal textarea{
            resize: none;
        }

        .principal h2{
            font-size: 16px;
            font-weight: bold;
            margin-right: 10px;
        }

        .principal > label{
            width: auto !important;
            margin: 0 15px 0 0;
            cursor: pointer;
            border: solid 1px #ccc;
            padding: 10px 15px;
        }

        .principal > input{
            width: 20px;
            visibility: hidden;
            position: absolute;
        }

        .principal div input, .principal div select{
            display: block;
            width: 100% !important;
            margin-top: 5px !important;
            padding: 5px 10px;
            height: 35px !important;
            background: #fff !important;
        }

        .principal div label.full{
            width: 100% !important;
        }

        .box{
            border: solid 1px #ccc;
            padding: 25px 15px 15px 15px;
            margin-bottom: 15px;
            background: #fff;
        }

        .principal div{
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            width: 100%;
        }

        .principal div label{
            margin-bottom: 15px !important;
            width: 48% !important;
            color: #000 !important;
        }

        .principal div label.shaman-full{
            width: 100% !important;
        }

        .principal input:checked+label{
            background: #fff;
            color: #000 !important;
        }

        .principal textarea{
            height: 80px;
            resize: none;
            margin-top: 5px;
        }

        div.sheet-tab-content { display: none; margin-top: 14px; }

        input.sheet-tab1:checked ~ div.sheet-tab1,
        input.sheet-tab2:checked ~ div.sheet-tab2,
        input.sheet-tab3:checked ~ div.sheet-tab3,
        input.sheet-tab4:checked ~ div.sheet-tab4{ display: flex; }

        hr{ width: 100%; }

        .principal div.card .card_desc label {
            width: 24% !important;
        }

        .principal div.card_attr label {
            display: flex;
            width: 100% !important;
            justify-content: space-between;
            flex-wrap: wrap;
        }

        .principal div.card_attr label select{
            width: 15% !important;
        }

        .principal div.card_attr label span{
            display: block;
            width: 100% !important;
        }

        .principal div.card {
            position: relative;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
            padding: 20px 70px 40px 20px;
            margin-bottom: 20px;
        }

        .principal .repitem button:not(.btn-danger) {
            height: 130px;
            position: absolute;
            right: 15px;
            bottom: 50px;
            width: 50px;
        }

        .principal .repitem .itemcontrol{
            z-index: 1;
        }

        .principal div input[name="attr_macro"]{
            position: absolute;
            bottom: 0;
            background: #ccc !important;
            padding: 0;
            border: 0;
            text-align: center;
            left: 0;
            outline: none;
            border-radius: 0;
        }

        .sheet-rolltemplate-shamanking table{
            width: 100%;
            background: #000;
            color: #fff !important;
        }

        .sheet-rolltemplate-shamanking table th{
            padding: 5px;
            font-size: 16px;
            text-align: center;
        }

        .sheet-rolltemplate-shamanking table th img{
            width: 100%;
            border-radius: 10px;
        }

        .sheet-rolltemplate-shamanking table td{
            padding: 5px;
            line-height: 1.5;
        }

        .sheet-rolltemplate-shamanking table td strong, .sheet-rolltemplate-shamanking table td b{
            display: block;
        }

        .sheet-rolltemplate-shamanking table td:only-child{
            text-align: center;
        }

        .sheet-rolltemplate-shamanking table td:first-child:not(:only-child){
            width: 85px;
            font-weight: bold;
            text-align: center;
        }

        .sheet-rolltemplate-shamanking table tr:not(:last-child) td{
            border-bottom: solid 1px #262626;
        }

        .sheet-rolltemplate-shamanking table td:first-child:not(:only-child) img{
            width: auto;
            height: 30px;
            display: block;
            margin: 0 auto;
            padding: 5px;
            background: #ccc;
            border-radius: 10px;
        }

        .sheet-rolltemplate-shamanking table td:first-child:not(:only-child) b,
        .sheet-rolltemplate-shamanking table td:first-child:not(:only-child) strong{
            display: none;
        }
        
        .sheet-rolltemplate-shamanking td:only-child img{
            width: 100%;
            height: auto;
            display: block;
        }

        .textchatcontainer .sheet-rolltemplate-shamanking a[href^="~"] {
            background: #000;
        }

        .textchatcontainer .sheet-rolltemplate-shamanking a[href^="~"]:hover{
            background: #2d2d2d;
        }
    </style>
</head>
<body>
    <div class="principal">
        <div class="box">
            <label>
                Nome
                <input name="attr_character_name" type="text"/>
            </label>
            <label>
                Descrição
                <input name="attr_description" type="text"/>
            </label>
        </div>
        <input id="tab1" type="radio" name="attr_tab" class="sheet-tab sheet-tab1" value="1" checked="checked"><label for="tab1">Atributos</label>
        <!-- <input id="tab2" type="radio" name="attr_tab" class="sheet-tab sheet-tab2" value="2"><label for="tab2">Espíritos</label> -->
        <input id="tab3" type="radio" name="attr_tab" class="sheet-tab sheet-tab3" value="3"><label for="tab3">OverSouls</label>
        <input id="tab4" type="radio" name="attr_tab" class="sheet-tab sheet-tab4" value="4"><label for="tab4">Equipamentos</label>
        <div class="box sheet-tab-content sheet-tab1">
            <!-- <button class="hidden" name="roll_oversoul-ligar" type="roll" value="!modattr --charid @{character_id} --silent --po|-@{last_os_custo}\n!token-mod --set statusmarkers|os:@{last_os_duration} --ids @{character_id} \n &{template:shamanking} !setattr --charid @{character_id} --silent --os_duration|@{last_os_duration}|@{last_os_duration} --os_at|@{last_os_at} --os_df|@{last_os_df} --os_mv|@{last_os_mv} --os_vd|@{last_os_vd} --tat|[[2+@{selected|at}+@{selected|last_os_at}+@{selected|eq_at}-@{selected|dat}]] --tmv|[[3+@{selected|mv}+@{selected|last_os_mv}+@{selected|eq_mv}-@{selected|dmv}]] --tvd|[[2+@{selected|vd}+@{selected|last_os_vd}+@{selected|eq_vd}-@{selected|dvd}]] --tal|[[1+@{selected|al}+@{selected|last_os_al}+@{selected|eq_al}-@{selected|dal}]] --tdf|[[(1+@{selected|df}+@{selected|last_os_df}+@{selected|eq_df}-@{selected|ddf})*2]]|[[(1+@{selected|df}+@{selected|last_os_df}+@{selected|eq_df}-@{selected|ddf})*2]] --os_al|@{last_os_al} --os_img|@{last_os_img} --os_nome|@{last_os_nome} !!! {{name=@{last_os_nome}}} {{imagem=[img](@{last_os_img})}} {{mensagem=*Ativado por @{character_name}*}}\n!token-mod --set aura1_radius|[[3+@{selected|mv}+@{selected|last_os_mv}+@{selected|eq_mv}-@{selected|dmv}]] aura2_radius|[[1+@{selected|al}+@{selected|last_os_al}+@{selected|eq_al}-@{selected|dal}]]"></button> -->
            <button class="hidden" name="roll_oversoul-ligar" type="roll" value="!modattr --charid @{character_id} --silent --po|-@{last_os_custo}\n!token-mod --set statusmarkers|os:@{last_os_duration} --ids @{character_id} \n &{template:shamanking} !setattr --charid @{character_id} --silent --os_duration|@{last_os_duration}|@{last_os_duration} --os_at|@{last_os_at} --os_df|@{last_os_df} --os_mv|@{last_os_mv} --os_vd|@{last_os_vd} --tat|[[2+@{selected|at}+@{selected|last_os_at}+@{selected|eq_at}-@{selected|dat}+@{selected|bat}]] --tmv|[[3+@{selected|mv}+@{selected|last_os_mv}+@{selected|eq_mv}-@{selected|dmv}+@{selected|bmv}]] --tvd|[[2+@{selected|vd}+@{selected|last_os_vd}+@{selected|eq_vd}-@{selected|dvd}+@{selected|bvd}]] --tal|[[1+@{selected|al}+@{selected|last_os_al}+@{selected|eq_al}-@{selected|dal}+@{selected|bal}]] --tdf|[[(1+@{selected|df}+@{selected|last_os_df}+@{selected|eq_df}-@{selected|ddf}+@{selected|bdf})*2]]|[[((1+@{selected|df}+@{selected|last_os_df}+@{selected|eq_df}-@{selected|ddf}+@{selected|bdf})*2)+8]] --os_al|@{last_os_al} --os_img|@{last_os_img} --os_nome|@{last_os_nome} !!! {{name=@{last_os_nome}}} {{imagem=[img](@{last_os_img})}} {{mensagem=*Ativado por @{character_name}*}}"></button>
            <button class="hidden" name="roll_bf-at" type="roll" value="!token-mod --set statusmarkers|at:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_bf-df" type="roll" value="!token-mod --set statusmarkers|df:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_bf-al" type="roll" value="!token-mod --set statusmarkers|al:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_bf-mv" type="roll" value="!token-mod --set statusmarkers|mv:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_bf-vd" type="roll" value="!token-mod --set statusmarkers|vd:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_dbf-at" type="roll" value="!token-mod --set statusmarkers|dat:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_dbf-df" type="roll" value="!token-mod --set statusmarkers|ddf:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_dbf-al" type="roll" value="!token-mod --set statusmarkers|dal:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_dbf-mv" type="roll" value="!token-mod --set statusmarkers|dmv:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_dbf-vd" type="roll" value="!token-mod --set statusmarkers|dvd:?{Modifier|0} --ids @{character_id}"></button>
            <button class="hidden" name="roll_rbf-at" type="roll" value="!token-mod --set statusmarkers|-dat|-at --ids @{character_id}"></button>
            <button class="hidden" name="roll_rbf-df" type="roll" value="!token-mod --set statusmarkers|-ddf|-df --ids @{character_id}"></button>
            <button class="hidden" name="roll_rbf-al" type="roll" value="!token-mod --set statusmarkers|-dal|-al --ids @{character_id}"></button>
            <button class="hidden" name="roll_rbf-mv" type="roll" value="!token-mod --set statusmarkers|-dmv|-mv --ids @{character_id}"></button>
            <button class="hidden" name="roll_rbf-vd" type="roll" value="!token-mod --set statusmarkers|-dvd|-vd --ids @{character_id}"></button>
            
            <button class="hidden tokenaction" name="roll_marcadores" type="roll" value="&{template:shamanking} {{name=Marcadores}} {{Lobo=[ON](~selected|hab_on_lobo) [OFF](~selected|hab_off_lobo) [  +  ](~selected|hab_plus_lobo) [  -  ](~selected|hab_minus_lobo)}} {{Escorpião=[ON](~selected|hab_on_escorpiao) [OFF](~selected|hab_off_escorpiao) [  +  ](~selected|hab_plus_escorpiao) [  -  ](~selected|hab_minus_escorpiao)}} {{Fogo=[ON](~selected|hab_on_fogo) [OFF](~selected|hab_off_fogo) [  +  ](~selected|hab_plus_fogo) [  -  ](~selected|hab_minus_fogo)}} {{Gelo=[ON](~selected|hab_on_gelo) [OFF](~selected|hab_off_gelo) [  +  ](~selected|hab_plus_gelo) [  -  ](~selected|hab_minus_gelo)}} {{Tempo=[ON](~selected|hab_on_tempo) [OFF](~selected|hab_off_tempo) [  +  ](~selected|hab_plus_tempo) [  -  ](~selected|hab_minus_tempo)}} {{Magnetizar=[ON](~selected|hab_on_magnetizar) [OFF](~selected|hab_off_magnetizar) [  +  ](~selected|hab_plus_magnetizar) [  -  ](~selected|hab_minus_magnetizar)}} {{Regenerar=[ON](~selected|hab_on_recuperar) [OFF](~selected|hab_off_recuperar) [  +  ](~selected|hab_plus_recuperar) [  -  ](~selected|hab_minus_recuperar)}} {{Meditar=[ON](~selected|hab_on_meditar) [OFF](~selected|hab_off_meditar) [  +  ](~selected|hab_plus_meditar) [  -  ](~selected|hab_minus_meditar)}} {{Liberar=[ON](~selected|hab_on_liberar) [OFF](~selected|hab_off_liberar) [  +  ](~selected|hab_plus_liberar) [  -  ](~selected|hab_minus_liberar)}} {{Restringir=[ON](~selected|hab_on_restringir) [OFF](~selected|hab_off_restringir) [  +  ](~selected|hab_plus_restringir) [  -  ](~selected|hab_minus_restringir)}} {{Voar=[ON](~selected|hab_on_voar) [OFF](~selected|hab_off_voar) [  +  ](~selected|hab_plus_voar) [  -  ](~selected|hab_minus_voar)}} {{Cegar=[ON](~selected|hab_on_cegar) [OFF](~selected|hab_off_cegar) [  +  ](~selected|hab_plus_cegar) [  -  ](~selected|hab_minus_cegar)}} {{Expandir=[ON](~selected|hab_on_expandir) [OFF](~selected|hab_off_expandir) [  +  ](~selected|hab_plus_expandir) [  -  ](~selected|hab_minus_expandir)}} {{Esqueleto Ataque=[ON](~selected|hab_on_acao) [OFF](~selected|hab_off_acao) [  +  ](~selected|hab_plus_acao) [  -  ](~selected|hab_minus_acao)}} {{Esqueleto Proteção=[ON](~selected|hab_on_missao) [OFF](~selected|hab_off_missao) [  +  ](~selected|hab_plus_missao) [  -  ](~selected|hab_minus_missao)}} {{Esqueleto Movimento=[ON](~selected|hab_on_area) [OFF](~selected|hab_off_area) [  +  ](~selected|hab_plus_area) [  -  ](~selected|hab_minus_area)}} {{Quebrar=[ON](~selected|hab_on_quebrar) [OFF](~selected|hab_off_quebrar) [  +  ](~selected|hab_plus_quebrar) [  -  ](~selected|hab_minus_quebrar)}} {{Armadura=[ON](~selected|hab_on_armadura) [OFF](~selected|hab_off_armadura) [  +  ](~selected|hab_plus_armadura) [  -  ](~selected|hab_minus_armadura)}}"></button>
            
            <button class="hidden" name="roll_hab_on_lobo" type="roll" value="!token-mod --set statusmarkers|lobo:4 --ids @{character_id}\n!setattr --sel --silent --lobo|4 --bmv|2 --tmv|[[3+@{selected|mv}+@{selected|os_mv}+@{selected|eq_mv}-@{selected|dmv}+2]]"></button>
            <button class="hidden" name="roll_hab_off_lobo" type="roll" value="!token-mod --set statusmarkers|-lobo --ids @{character_id}\n!setattr --sel --silent --lobo|0 --bmv|0 --tmv|[[3+@{selected|mv}+@{selected|os_mv}+@{selected|eq_mv}-@{selected|dmv}]]"></button>
            <button class="hidden" name="roll_hab_plus_lobo" type="roll" value="!token-mod --set statusmarkers|lobo:[[@{lobo} + 1]] --ids @{character_id}\n!modbattr --sel --silent --lobo|+1"></button>
            <button class="hidden" name="roll_hab_minus_lobo" type="roll" value="!token-mod --set statusmarkers|lobo:[[@{lobo} - 1]] --ids @{character_id}\n!modbattr --sel --silent --lobo|-1"></button>
            
            <button class="hidden" name="roll_hab_on_escorpiao" type="roll" value="!token-mod --set statusmarkers|escorpiao:2 --ids @{character_id}\n!setattr --sel --silent --escorpiao|2"></button>
            <button class="hidden" name="roll_hab_off_escorpiao" type="roll" value="!token-mod --set statusmarkers|-escorpiao --ids @{character_id}\n!setattr --sel --silent --escorpiao|0"></button>
            <button class="hidden" name="roll_hab_plus_escorpiao" type="roll" value="!token-mod --set statusmarkers|escorpiao:[[@{escorpiao} + 1]] --ids @{character_id}\n!modbattr --sel --silent --escorpiao|+1"></button>
            <button class="hidden" name="roll_hab_minus_escorpiao" type="roll" value="!token-mod --set statusmarkers|escorpiao:[[@{escorpiao} - 1]] --ids @{character_id}\n!modbattr --sel --silent --escorpiao|-1"></button>
            
            <button class="hidden" name="roll_hab_on_fogo" type="roll" value="!token-mod --set statusmarkers|fogo:3 --ids @{character_id}\n!setattr --sel --silent --fogo|3"></button>
            <button class="hidden" name="roll_hab_off_fogo" type="roll" value="!token-mod --set statusmarkers|-fogo --ids @{character_id}\n!setattr --sel --silent --fogo|0"></button>
            <button class="hidden" name="roll_hab_plus_fogo" type="roll" value="!token-mod --set statusmarkers|fogo:[[@{fogo} + 1]] --ids @{character_id}\n!modbattr --sel --silent --fogo|+1"></button>
            <button class="hidden" name="roll_hab_minus_fogo" type="roll" value="!token-mod --set statusmarkers|fogo:[[@{fogo} - 1]] --ids @{character_id}\n!modbattr --sel --silent --fogo|-1"></button>
            
            <button class="hidden" name="roll_hab_on_gelo" type="roll" value="!token-mod --set statusmarkers|gelo:2 --ids @{character_id}\n!setattr --sel --silent --gelo|2 --dmv|2 --tmv|[[3+@{selected|mv}+@{selected|os_mv}+@{selected|eq_mv}-2+@{selected|bmv}]]"></button>
            <button class="hidden" name="roll_hab_off_gelo" type="roll" value="!token-mod --set statusmarkers|-gelo --ids @{character_id}\n!setattr --sel --silent --gelo|0 --dmv|0 --tmv|[[3+@{selected|mv}+@{selected|os_mv}+@{selected|eq_mv}+@{selected|bmv}]]"></button>
            <button class="hidden" name="roll_hab_plus_gelo" type="roll" value="!token-mod --set statusmarkers|gelo:[[@{gelo} + 1]] --ids @{character_id}\n!modbattr --sel --silent --gelo|+1"></button>
            <button class="hidden" name="roll_hab_minus_gelo" type="roll" value="!token-mod --set statusmarkers|gelo:[[@{gelo} - 1]] --ids @{character_id}\n!modbattr --sel --silent --gelo|-1"></button>
            
            <button class="hidden" name="roll_hab_on_tempo" type="roll" value="!token-mod --set statusmarkers|tempo:4 --ids @{character_id}\n!setattr --sel --silent --tempo|4"></button>
            <button class="hidden" name="roll_hab_off_tempo" type="roll" value="!token-mod --set statusmarkers|-tempo --ids @{character_id}\n!setattr --sel --silent --tempo|0"></button>
            <button class="hidden" name="roll_hab_plus_tempo" type="roll" value="!token-mod --set statusmarkers|tempo:[[@{tempo} + 1]] --ids @{character_id}\n!modbattr --sel --silent --tempo|+1"></button>
            <button class="hidden" name="roll_hab_minus_tempo" type="roll" value="!token-mod --set statusmarkers|tempo:[[@{tempo} - 1]] --ids @{character_id}\n!modbattr --sel --silent --tempo|-1"></button>
            
            <button class="hidden" name="roll_hab_on_magnetizar" type="roll" value="!token-mod --set statusmarkers|magnetizar:4 --ids @{character_id}\n!setattr --sel --silent --magnetizar|4"></button>
            <button class="hidden" name="roll_hab_off_magnetizar" type="roll" value="!token-mod --set statusmarkers|-magnetizar --ids @{character_id}\n!setattr --sel --silent --magnetizar|0"></button>
            <button class="hidden" name="roll_hab_plus_magnetizar" type="roll" value="!token-mod --set statusmarkers|magnetizar:[[@{magnetizar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --magnetizar|+1"></button>
            <button class="hidden" name="roll_hab_minus_magnetizar" type="roll" value="!token-mod --set statusmarkers|magnetizar:[[@{magnetizar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --magnetizar|-1"></button>
            
            <button class="hidden" name="roll_hab_on_meditar" type="roll" value="!token-mod --set statusmarkers|meditar:4 --ids @{character_id}\n!setattr --sel --silent --meditar|4"></button>
            <button class="hidden" name="roll_hab_off_meditar" type="roll" value="!token-mod --set statusmarkers|-meditar --ids @{character_id}\n!setattr --sel --silent --meditar|0"></button>
            <button class="hidden" name="roll_hab_plus_meditar" type="roll" value="!token-mod --set statusmarkers|meditar:[[@{meditar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --meditar|+1"></button>
            <button class="hidden" name="roll_hab_minus_meditar" type="roll" value="!token-mod --set statusmarkers|meditar:[[@{meditar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --meditar|-1"></button>
            
            
            <button class="hidden" name="roll_hab_on_liberar" type="roll" value="!token-mod --set statusmarkers|liberar:4 --ids @{character_id}\n!setattr --sel --silent --liberar|4 --bat|2 --tat|[[2+@{selected|at}+@{selected|os_at}+@{selected|eq_at}-@{selected|dat}+2]]"></button>
            <button class="hidden" name="roll_hab_off_liberar" type="roll" value="!token-mod --set statusmarkers|-liberar --ids @{character_id}\n!setattr --sel --silent --liberar|0 --bat|0 --tat|[[2+@{selected|at}+@{selected|os_at}+@{selected|eq_at}-@{selected|dat}]]"></button>
            <button class="hidden" name="roll_hab_plus_liberar" type="roll" value="!token-mod --set statusmarkers|liberar:[[@{liberar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --liberar|+1"></button>
            <button class="hidden" name="roll_hab_minus_liberar" type="roll" value="!token-mod --set statusmarkers|liberar:[[@{liberar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --liberar|-1"></button>
            
            <button class="hidden" name="roll_hab_on_restringir" type="roll" value="!token-mod --set statusmarkers|restringir:4 --ids @{character_id}\n!setattr --sel --silent --restringir|4 --dat|2 --tat|[[2+@{selected|at}+@{selected|os_at}+@{selected|eq_at}+@{selected|bat}-2]]"></button>
            <button class="hidden" name="roll_hab_off_restringir" type="roll" value="!token-mod --set statusmarkers|-restringir --ids @{character_id}\n!setattr --sel --silent --restringir|0 --dat|0 --tat|[[2+@{selected|at}+@{selected|os_at}+@{selected|eq_at}+@{selected|bat}]]"></button>
            <button class="hidden" name="roll_hab_plus_restringir" type="roll" value="!token-mod --set statusmarkers|restringir:[[@{restringir} + 1]] --ids @{character_id}\n!modbattr --sel --silent --restringir|+1"></button>
            <button class="hidden" name="roll_hab_minus_restringir" type="roll" value="!token-mod --set statusmarkers|restringir:[[@{restringir} - 1]] --ids @{character_id}\n!modbattr --sel --silent --restringir|-1"></button>

            <button class="hidden" name="roll_hab_on_armadura" type="roll" value="!token-mod --set statusmarkers|armadura:4 --ids @{character_id}\n!setattr --sel --silent --armadura|4 --bdf|2 --tdf|[[((1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}-@{selected|ddf})*2)+4]]|[[((1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}-@{selected|ddf})*2)+4+8]]"></button>
            <button class="hidden" name="roll_hab_off_armadura" type="roll" value="!token-mod --set statusmarkers|-armadura --ids @{character_id}\n!setattr --sel --silent --armadura|0 --bdf|0 --tdf|[[(1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}-@{selected|ddf})*2]]|[[((1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}-@{selected|ddf})*2)+8]]"></button>
            <button class="hidden" name="roll_hab_plus_armadura" type="roll" value="!token-mod --set statusmarkers|armadura:[[@{armadura} + 1]] --ids @{character_id}\n!modbattr --sel --silent --armadura|+1"></button>
            <button class="hidden" name="roll_hab_minus_armadura" type="roll" value="!token-mod --set statusmarkers|armadura:[[@{armadura} - 1]] --ids @{character_id}\n!modbattr --sel --silent --armadura|-1"></button>
            
            <button class="hidden" name="roll_hab_on_quebrar" type="roll" value="!token-mod --set statusmarkers|quebrar:4 --ids @{character_id}\n!setattr --sel --silent --quebrar|4 --ddf|2 --tdf|[[((1+@{selected|df}+@{selected|eq_df}+@{selected|os_df}+@{selected|bdf})*2)-4]]|[[((1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}+@{selected|bdf})*2)-4+8]]"></button>
            <button class="hidden" name="roll_hab_off_quebrar" type="roll" value="!token-mod --set statusmarkers|-quebrar --ids @{character_id}\n!setattr --sel --silent --quebrar|0 --ddf|0 --tdf|[[(1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}+@{selected|bdf})*2]]|[[((1+@{selected|df}+@{selected|os_df}+@{selected|eq_df}+@{selected|bdf})*2)+8]]"></button>
            <button class="hidden" name="roll_hab_plus_quebrar" type="roll" value="!token-mod --set statusmarkers|quebrar:[[@{quebrar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --quebrar|+1"></button>
            <button class="hidden" name="roll_hab_minus_quebrar" type="roll" value="!token-mod --set statusmarkers|quebrar:[[@{quebrar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --quebrar|-1"></button>
            
            <button class="hidden" name="roll_hab_on_voar" type="roll" value="!token-mod --set statusmarkers|voar:4 --ids @{character_id}\n!setattr --sel --silent --voar|4"></button>
            <button class="hidden" name="roll_hab_off_voar" type="roll" value="!token-mod --set statusmarkers|-voar --ids @{character_id}\n!setattr --sel --silent --voar|0"></button>
            <button class="hidden" name="roll_hab_plus_voar" type="roll" value="!token-mod --set statusmarkers|voar:[[@{voar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --voar|+1"></button>
            <button class="hidden" name="roll_hab_minus_voar" type="roll" value="!token-mod --set statusmarkers|voar:[[@{voar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --voar|-1"></button>
            
            <button class="hidden" name="roll_hab_on_cegar" type="roll" value="!token-mod --set statusmarkers|cegar:4 --ids @{character_id}\n!setattr --sel --silent --cegar|4 --dal|2 --tal|[[1+@{selected|al}+@{selected|os_al}+@{selected|eq_al}+@{selected|bal}-2]]"></button>
            <button class="hidden" name="roll_hab_off_cegar" type="roll" value="!token-mod --set statusmarkers|-cegar --ids @{character_id}\n!setattr --sel --silent --cegar|0 --dal|0 --tal|[[1+@{selected|al}+@{selected|os_al}+@{selected|eq_al}+@{selected|bal}]]"></button>
            <button class="hidden" name="roll_hab_plus_cegar" type="roll" value="!token-mod --set statusmarkers|cegar:[[@{cegar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --cegar|+1"></button>
            <button class="hidden" name="roll_hab_minus_cegar" type="roll" value="!token-mod --set statusmarkers|cegar:[[@{cegar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --cegar|-1"></button>
            
            <button class="hidden" name="roll_hab_on_expandir" type="roll" value="!token-mod --set statusmarkers|expandir:4 --ids @{character_id}\n!setattr --sel --silent --expandir|4 --bal|2 --tal|[[1+@{selected|al}+@{selected|os_al}+@{selected|eq_al}-@{selected|dal}+2]]"></button>
            <button class="hidden" name="roll_hab_off_expandir" type="roll" value="!token-mod --set statusmarkers|-expandir --ids @{character_id}\n!setattr --sel --silent --expandir|0 --bal|0 --tal|[[1+@{selected|al}+@{selected|os_al}+@{selected|eq_al}-@{selected|dal}]]"></button>
            <button class="hidden" name="roll_hab_plus_expandir" type="roll" value="!token-mod --set statusmarkers|expandir:[[@{expandir} + 1]] --ids @{character_id}\n!modbattr --sel --silent --expandir|+1"></button>
            <button class="hidden" name="roll_hab_minus_expandir" type="roll" value="!token-mod --set statusmarkers|expandir:[[@{expandir} - 1]] --ids @{character_id}\n!modbattr --sel --silent --expandir|-1"></button>
            
            <button class="hidden" name="roll_hab_on_acao" type="roll" value="!token-mod --set statusmarkers|at:0 --ids @{character_id}\n!setattr --sel --silent --acao|0"></button>
            <button class="hidden" name="roll_hab_off_acao" type="roll" value="!token-mod --set statusmarkers|-at --ids @{character_id}\n!setattr --sel --silent --acao|0"></button>
            <button class="hidden" name="roll_hab_plus_acao" type="roll" value="!token-mod --set statusmarkers|at:[[@{acao} + 1]] --ids @{character_id}\n!modbattr --sel --silent --acao|+1"></button>
            <button class="hidden" name="roll_hab_minus_acao" type="roll" value="!token-mod --set statusmarkers|at:[[@{acao} - 1]] --ids @{character_id}\n!modbattr --sel --silent --acao|-1"></button>
            
            <button class="hidden" name="roll_hab_on_missao" type="roll" value="!token-mod --set statusmarkers|df:0 --ids @{character_id}\n!setattr --sel --silent --missao|0"></button>
            <button class="hidden" name="roll_hab_off_missao" type="roll" value="!token-mod --set statusmarkers|-df --ids @{character_id}\n!setattr --sel --silent --missao|0"></button>
            <button class="hidden" name="roll_hab_plus_missao" type="roll" value="!token-mod --set statusmarkers|df:[[@{missao} + 1]] --ids @{character_id}\n!modbattr --sel --silent --missao|+1"></button>
            <button class="hidden" name="roll_hab_minus_missao" type="roll" value="!token-mod --set statusmarkers|df:[[@{missao} - 1]] --ids @{character_id}\n!modbattr --sel --silent --missao|-1"></button>

            <button class="hidden" name="roll_hab_on_recuperar" type="roll" value="!token-mod --set statusmarkers|recuperar:0 --ids @{character_id}\n!setattr --sel --silent --recuperar|0"></button>
            <button class="hidden" name="roll_hab_off_recuperar" type="roll" value="!token-mod --set statusmarkers|-recuperar --ids @{character_id}\n!setattr --sel --silent --recuperar|0"></button>
            <button class="hidden" name="roll_hab_plus_recuperar" type="roll" value="!token-mod --set statusmarkers|recuperar:[[@{recuperar} + 1]] --ids @{character_id}\n!modbattr --sel --silent --recuperar|+1"></button>
            <button class="hidden" name="roll_hab_minus_recuperar" type="roll" value="!token-mod --set statusmarkers|recuperar:[[@{recuperar} - 1]] --ids @{character_id}\n!modbattr --sel --silent --recuperar|-1"></button>
            
            <button class="hidden" name="roll_hab_on_area" type="roll" value="!token-mod --set statusmarkers|mv:0 --ids @{character_id}\n!setattr --sel --silent --area|0"></button>
            <button class="hidden" name="roll_hab_off_area" type="roll" value="!token-mod --set statusmarkers|-mv --ids @{character_id}\n!setattr --sel --silent --area|0"></button>
            <button class="hidden" name="roll_hab_plus_area" type="roll" value="!token-mod --set statusmarkers|mv:[[@{area} + 1]] --ids @{character_id}\n!modbattr --sel --silent --area|+1"></button>
            <button class="hidden" name="roll_hab_minus_area" type="roll" value="!token-mod --set statusmarkers|mv:[[@{area} - 1]] --ids @{character_id}\n!modbattr --sel --silent --area|-1"></button>
            
            <button class="hidden" name="roll_hab_on" type="roll" value=""></button>
            <button class="hidden" name="roll_hab_off" type="roll" value=""></button>
            <button class="hidden" name="roll_hab_plus" type="roll" value=""></button>
            <button class="hidden" name="roll_hab_minus" type="roll" value=""></button>
            
            <button class="hidden" name="roll_gloss-medium" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Medium}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/movimentar.png)=@{selected|hab_movimentar}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/ataque.png)=@{selected|hab_ataque}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/defesa.png)=@{selected|hab_defesa}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/curar.png)=@{selected|hab_curar}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/dadoataque.png)=@{selected|hab_dadoataque}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/dadodefesa.png)=@{selected|hab_dadodefesa}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/dadocurar.png)=@{selected|hab_dadocurar}}} {{**7**[img](https://shaman-rpg-roll20.vercel.app/img/empurrar.png)=@{selected|hab_empurrar}}} {{**8**[img](https://shaman-rpg-roll20.vercel.app/img/puxar.png)=@{selected|hab_puxar}}} {{**9**[img](https://shaman-rpg-roll20.vercel.app/img/acrobacia.png)=@{selected|hab_acrobacia}}} {{**10**[img](https://shaman-rpg-roll20.vercel.app/img/reagir.png)=@{selected|hab_reagir}}}"></button>
            <button class="hidden" name="roll_gloss-primitivos" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Primitivos}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/urso.png)=@{selected|hab_urso}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/cobra.png)=@{selected|hab_cobra}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/lobo.png)=@{selected|hab_lobo}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/aguia.png)=@{selected|hab_aguia}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/touro.png)=@{selected|hab_touro}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/escorpiao.png)=@{selected|hab_escorpiao}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/tartaruga.png)=@{selected|hab_tartaruga}}}"></button>
            <button class="hidden" name="roll_gloss-elementos" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Elementos}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/agua.png)=@{selected|hab_agua}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/vento.png)=@{selected|hab_vento}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/terra.png)=@{selected|hab_terra}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/fogo.png)=@{selected|hab_fogo}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/gelo.png)=@{selected|hab_gelo}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/madeira.png)=@{selected|hab_madeira}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/raio.png)=@{selected|hab_raio}}}"></button>
            <button class="hidden" name="roll_gloss-materia" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Matéria}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/gravidade.png)=@{selected|hab_gravidade}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/trocar.png)=@{selected|hab_trocar}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/extender.png)=@{selected|hab_extender}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/tempo.png)=@{selected|hab_tempo}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/magnetismo.png)=@{selected|hab_magnetismo}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/portal.png)=@{selected|hab_portal}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/retroceder.png)=@{selected|hab_retroceder}}}"></button>
            <button class="hidden" name="roll_gloss-sacerdote" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Sacerdote}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/transferir.png)=@{selected|hab_transferir}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/energia.png)=@{selected|hab_energia}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/converter.png)=@{selected|hab_converter}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/recuperar.png)=@{selected|hab_recuperar}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/regenerar.png)=@{selected|hab_regenerar}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/meditar.png)=@{selected|hab_meditar}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/barreira.png)=@{selected|hab_barreira}}}"></button>
            <button class="hidden" name="roll_gloss-artes" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Artes Proibidas}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/corpo.png)=@{selected|hab_corpo}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/resistencia.png)=@{selected|hab_resistencia}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/dano.png)=@{selected|hab_dano}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/area.png)=@{selected|hab_area}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/proteger.png)=@{selected|hab_proteger}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/combinar.png)=@{selected|hab_combinar}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/reintegrar.png)=@{selected|hab_reintegrar}}}"></button>
            <button class="hidden" name="roll_gloss-divindade" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Habilidades - Divindade}} {{**0**[img](https://shaman-rpg-roll20.vercel.app/img/liberar.png)=@{selected|hab_liberar}}} {{**1**[img](https://shaman-rpg-roll20.vercel.app/img/restringir.png)=@{selected|hab_restringir}}} {{**2**[img](https://shaman-rpg-roll20.vercel.app/img/voar.png)=@{selected|hab_voar}}} {{**3**[img](https://shaman-rpg-roll20.vercel.app/img/corrente.png)=@{selected|hab_corrente}}} {{**4**[img](https://shaman-rpg-roll20.vercel.app/img/expandir.png)=@{selected|hab_expandir}}} {{**5**[img](https://shaman-rpg-roll20.vercel.app/img/cegar.png)=@{selected|hab_cegar}}} {{**6**[img](https://shaman-rpg-roll20.vercel.app/img/defletir.png)=@{selected|hab_defletir}}}"></button>
            
            <button class="hidden tokenaction" name="roll_glossario" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Glossário}} {{Caminho do Médium=[Ver](~selected|gloss-medium)}} {{Caminho dos Primitivos=[Ver](~selected|gloss-primitivos)}} {{Caminho dos Elementos=[Ver](~selected|gloss-elementos)}} {{Caminho da Matéria=[Ver](~selected|gloss-materia)}} {{Caminho do Sacerdote=[Ver](~selected|gloss-sacerdote)}} {{Caminho das Artes Proibidas=[Ver](~selected|gloss-artes)}} {{Caminho das Divindades=[Ver](~selected|gloss-divindade)}}"></button>
            <!--
            <button class="hidden tokenaction" name="roll_marcadores" type="roll" value="/w @{selected|character_name} &{template:shamanking} {{name=Marcadores}} {{Lobo=[ON](~selected|hab_on_lobo) [OFF](~selected|hab_off_lobo) [&nbsp;&nbsp;+&nbsp;&nbsp;](~selected|hab_plus_lobo) [&nbsp;&nbsp;-&nbsp;&nbsp;](~selected|hab_minus_lobo)}} {{Escorpião=[ON](~selected|hab_on_escorpiao) [OFF](~selected|hab_off_escorpiao) [&nbsp;&nbsp;+&nbsp;&nbsp;](~selected|hab_plus_escorpiao) [&nbsp;&nbsp;-&nbsp;&nbsp;](~selected|hab_minus_escorpiao)}} {{Fogo=[ON](~selected|hab_on_fogo) [OFF](~selected|hab_off_fogo) [&nbsp;&nbsp;+&nbsp;&nbsp;](~selected|hab_plus_fogo) [&nbsp;&nbsp;-&nbsp;&nbsp;](~selected|hab_minus_fogo)}} {{Gelo=[ON](~selected|hab_on_gelo) [OFF](~selected|hab_off_gelo) [&nbsp;&nbsp;+&nbsp;&nbsp;](~selected|hab_plus_gelo) [&nbsp;&nbsp;-&nbsp;&nbsp;](~selected|hab_minus_gelo)}}"></button>
            -->
            <!--
            <button class="hidden tokenaction" name="roll_aura-ligar" type="roll" value="!token-mod --set aura1_radius|[[3+@{selected|mv}+@{selected|os_mv}+@{selected|eq_mv}-@{selected|dmv}]] aura2_radius|[[1+@{selected|al}+@{selected|os_al}+@{selected|eq_al}-@{selected|dal}]]"></button>
            <button class="hidden tokenaction" name="roll_aura-desligar" type="roll" value="!token-mod --set aura1_radius| aura2_radius|"></button>
            -->
            <!-- <button class="hidden tokenaction" name="roll_oversoul-desligar" type="roll" value="!setattr --charid @{character_id} --silent --os_nome|Nenhum OS Ativo --os_duration|0|OFF --os_at|0 --os_df|0 --os_mv|0 --os_vd|0 --os_al|0 --os_duration|0 \n &{template:default} {{name=@{character_name} desativou um Oversoul}} {{Oversoul=@{os_nome}}}"></button> -->
            <!-- <button class="hidden tokenaction" name="roll_oversoul-reduzir" type="roll" value="!modbattr --charid @{character_id} --silent --os_duration|-1 \n &{template:default} {{name=@{character_name} - @{os_nome}}} {{Info=Restam [[@{os_duration} - 1]] turno(s) }}"></button> -->
            <button class="hidden tokenaction" name="roll_oversoul-desligar" type="roll" value="!setattr --charid @{character_id} --silent --os_nome|Nenhum OS Ativo --os_duration|0|OFF --os_at|0 --os_df|0 --os_mv|0 --os_vd|0 --os_al|0 --os_duration|0 --tat|[[2+@{selected|at}+@{selected|eq_at}-@{selected|dat}+@{selected|bat}]] --tmv|[[3+@{selected|mv}+@{selected|eq_mv}-@{selected|dmv}+@{selected|bmv}]] --tvd|[[2+@{selected|vd}+@{selected|eq_vd}-@{selected|dvd}+@{selected|bvd}]] --tal|[[1+@{selected|al}+@{selected|eq_al}-@{selected|dal}+@{selected|bal}]] --tdf|[[(1+@{selected|df}+@{selected|eq_df}-@{selected|ddf}+@{selected|bdf})*2]]|[[((1+@{selected|df}+@{selected|eq_df}-@{selected|ddf}+@{selected|bdf})*2)+8]] \n!token-mod --set statusmarkers|-os --ids @{character_id} \n&{template:shamanking} {{name=@{os_nome}}} {{mensagem=Desativado por @{character_name}}}"></button>
            <button class="hidden tokenaction" name="roll_oversoul-reduzir" type="roll" value="!token-mod --set statusmarkers|os:-1 --ids @{character_id} \n!modbattr --charid @{character_id} --silent --os_duration|-1 \n &{template:shamanking} {{name=@{character_name} - @{os_nome}}} {{Info=Restam [[@{os_duration} - 1]] turno(s) }}"></button>
            <table>
                <thead>
                    <tr>
                        <td>Nível</td>
                        <td>PV</td>
                        <td>PO</td>
                        <td>MV</td>
                        <td>DF</td>
                        <td>Atributos</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>50</td>
                        <td>20</td>
                        <td>3</td>
                        <td>2</td>
                        <td>4 pontos</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>60</td>
                        <td>20</td>
                        <td>3</td>
                        <td>2</td>
                        <td>2 pontos</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>70</td>
                        <td>30</td>
                        <td>3</td>
                        <td>2</td>
                        <td>2 pontos</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td>80</td>
                        <td>30</td>
                        <td>3</td>
                        <td>2</td>
                        <td>3 pontos</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>90</td>
                        <td>40</td>
                        <td>3</td>
                        <td>2</td>
                        <td>3 pontos</td>
                    </tr>
                </tbody>
            </table>
            <hr><h2>Contadores</h2><hr>
            <label>
                Nível
                <select name="attr_nivel">
                    <option value="1" selected>1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                </select>
            </label>
            <label>
                Dado de Atributo
                <select name="attr_da">
                    <option value="d4" selected>D4</option>
                </select>
            </label>
            <label>
                Pontos de Vida
                <input type="number" name="attr_pv" value="0"/>
            </label>
            <label>
                Pontos de Vida Máx.
                <input type="number" name="attr_pv_max" value="0" min="0"/>
            </label>
            <label>
                Poder Oculto
                <input type="number" name="attr_po" value="0" min="0"/>
            </label>
            <label>
                Poder Oculto Máx.
                <input type="number" name="attr_po_max" value="0" min="0"/>
            </label>
            <hr><h2>Árvore de Atributos</h2><hr>
            <label>
                Ataque (AT)
                <input type="number" name="attr_at" value="0" min="0"/>
            </label>
            <label>
                Defesa (DF)
                <input type="number" name="attr_df" value="0" min="0"/>
            </label>
            <label>
                Movimento (MV)
                <input type="number" name="attr_mv" value="0" min="0"/>
            </label>
            <label>
                Alcance (AL)
                <input type="number" name="attr_al" value="0" min="0"/>
            </label>
            <label>
                Vida (VD)
                <input type="number" name="attr_vd" value="0" min="0"/>
            </label>
            <label>
                Espírito (ES)
                <input type="number" name="attr_es" value="0" min="0"/>
            </label>
            <table>
                <thead>
                    <tr>
                        <td>Nome</td>
                        <td>Descrição</td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ES (Espírito)</td>
                        <td>Concede +5 de PO permanente para o personagem.</td>
                    </tr>
                    <tr>
                        <td>VD (Vida)</td>
                        <td>Concede +10 de PV permanente para o personagem. Com OS ativado, adiciona +1 de bônus em ações de cura.</td>
                    </tr>
                    <tr>
                        <td>AT (Ataque)</td>
                        <td>Concede +1 de AT permanente para o personagem. Com OS ativado, adiciona +1 de bônus em ações de ataque.</td>
                    </tr>
                    <tr>
                        <td>DF (Defesa)</td>
                        <td>Concede +2 de DF temporária para o personagem. Com OS ativado, adiciona +1 de bônus em ações de defesa e +2 em DF temporária. </td>
                    </tr>
                    <tr>
                        <td>AL (Alcance)</td>
                        <td>Concede +1 de AL permanente para o personagem. Com OS ativado, adiciona +1 de bônus no alcance do personagem e em ações de alcance.</td>
                    </tr>
                    <tr>
                        <td>MV (Movimento)</td>
                        <td>Concede +1 de MV permanente para o personagem. Com OS ativado, adiciona +1 de bônus em ações de movimento. </td>
                    </tr>
                </tbody>
            </table>
            <hr><h2>Bônus de Equipamento</h2><hr>
            <label>
                Ataque (AT)
                <input type="number" name="attr_eq_at" value="0" min="0"/>
            </label>
            <label>
                Defesa (DF)
                <input type="number" name="attr_eq_df" value="0" min="0"/>
            </label>
            <label>
                Movimento (MV)
                <input type="number" name="attr_eq_mv" value="0" min="0"/>
            </label>
            <label>
                Alcance (AL)
                <input type="number" name="attr_eq_al" value="0" min="0"/>
            </label>
            <label>
                Vida (VD)
                <input type="number" name="attr_eq_vd" value="0" min="0"/>
            </label>
            <label>
                Espírito (ES)
                <input type="number" name="attr_eq_es" value="0" min="0"/>
            </label>
        </div>
        <div class="box sheet-tab-content sheet-tab2">
            
        </div>
        <div class="box sheet-tab-content sheet-tab3">
            <label class="full">Lista de OverSouls</label>
            <fieldset class="repeating_am" style="display: none;">
                <div class="card">
                    <div class="card_desc">
                        <label>
                            Nome
                            <input type="text" name="attr_nome" value="" placeholder="Nome"/>
                        </label>
                        <label>
                            Duração
                            <input type="number" name="attr_turnos" value="1" placeholder="Turnos"/>
                        </label>
                        <label>
                            Custo
                            <input type="number" name="attr_custo" value="1" placeholder="Custo"/>
                        </label>
                        <label>
                            Imagem
                            <input type="text" name="attr_img" value=""/>
                        </label>
                    </div>
                    <div class="card_attr">
                        <label>
                            <span>Bônus de Atributos</span>
                            <select name="attr_at1">
                                <option selected default value="">-</option>
                                <option value="AT">AT</option>
                                <option value="DF">DF</option>
                                <option value="MV">MV</option>
                                <option value="AL">AL</option>
                                <option value="VD">VD</option>
                            </select>
                            <select name="attr_at2">
                                <option selected default value="">-</option>
                                <option value="AT">AT</option>
                                <option value="DF">DF</option>
                                <option value="MV">MV</option>
                                <option value="AL">AL</option>
                                <option value="VD">VD</option>
                            </select>
                            <select name="attr_at3">
                                <option selected default value="">-</option>
                                <option value="AT">AT</option>
                                <option value="DF">DF</option>
                                <option value="MV">MV</option>
                                <option value="AL">AL</option>
                                <option value="VD">VD</option>
                            </select>
                            <select name="attr_at4">
                                <option selected default value="">-</option>
                                <option value="AT">AT</option>
                                <option value="DF">DF</option>
                                <option value="MV">MV</option>
                                <option value="AL">AL</option>
                                <option value="VD">VD</option>
                            </select>
                            <select name="attr_at5">
                                <option selected default value="">-</option>
                                <option value="AT">AT</option>
                                <option value="DF">DF</option>
                                <option value="MV">MV</option>
                                <option value="AL">AL</option>
                                <option value="VD">VD</option>
                            </select>
                            <select name="attr_at6">
                                <option selected default value="">-</option>
                                <option value="AT">AT</option>
                                <option value="DF">DF</option>
                                <option value="MV">MV</option>
                                <option value="AL">AL</option>
                                <option value="VD">VD</option>
                            </select>
                        </label>        
                    </div>
                    <input type="text" name="attr_macro" readonly>
                    <button type="roll" name="attr_roll" value=""></button>
                </div>
            </fieldset>
        </div>
        <div class="box sheet-tab-content sheet-tab4">
            
            <label class="full">
                <textarea name="attr_info" rows="20"></textarea>
            </label>
        </div>
        <div class="box sheet-tab-content">
            <input type="hidden" name="attr_os_nome" value="Nenhum OS ativo">
            <input type="hidden" name="attr_os_duration" value="0">
            <input type="hidden" name="attr_os_duration_max" value="0">
            <input type="hidden" name="attr_os_at" value="0">
            <input type="hidden" name="attr_os_df" value="0">
            <input type="hidden" name="attr_os_mv" value="0">
            <input type="hidden" name="attr_os_al" value="0">
            <input type="hidden" name="attr_os_vd" value="0">
            <input type="hidden" name="attr_last_os_nome" value="Nenhum OS ativo">
            <input type="hidden" name="attr_last_os_duration" value="0">
            <input type="hidden" name="attr_last_os_custo" value="0">
            <input type="hidden" name="attr_last_os_at" value="0">
            <input type="hidden" name="attr_last_os_df" value="0">
            <input type="hidden" name="attr_last_os_mv" value="0">
            <input type="hidden" name="attr_last_os_al" value="0">
            <input type="hidden" name="attr_last_os_vd" value="0">
            
            <input type="hidden" name="attr_bat" value="0">
            <input type="hidden" name="attr_bdf" value="0">
            <input type="hidden" name="attr_bvd" value="0">
            <input type="hidden" name="attr_bmv" value="0">
            <input type="hidden" name="attr_bal" value="0">
            <input type="hidden" name="attr_dat" value="0">
            <input type="hidden" name="attr_ddf" value="0">
            <input type="hidden" name="attr_dvd" value="0">
            <input type="hidden" name="attr_dmv" value="0">
            <input type="hidden" name="attr_dal" value="0">
            <input type="hidden" name="attr_tat" value="0">
            <input type="hidden" name="attr_tdf" value="0">
            <input type="hidden" name="attr_tvd" value="0">
            <input type="hidden" name="attr_tmv" value="0">
            <input type="hidden" name="attr_tal" value="0">
            
            <input type="hidden" name="attr_hab_movimentar" value="**Movimentar - Ação** Usado apenas em si mesmo. Movimente [[@{selected|tmv}]] casas">
            <input type="hidden" name="attr_hab_ataque" value="**Atacar - Ação** Causa [[@{selected|tat}]] de dano">
            <input type="hidden" name="attr_hab_dadoataque" value="**Atacar - Ação** Causa [[@{selected|da}]] de dano">
            <input type="hidden" name="attr_hab_defesa" value="**Defender - Ação** Usado apenas em si mesmo. Concede [[2 + @{selected|df} + @{selected|os_df} + @{selected|bdf} - @{selected|ddf}]] de armadura. Se usado em reação ignora o limite.">
            <input type="hidden" name="attr_hab_dadodefesa" value="**Defender - Ação** Usado apenas em si mesmo.  Concede [[@{selected|da}]] de armadura. Se usado em reação ignora o limite.">
            <input type="hidden" name="attr_hab_curar" value="**Curar - Ação** Usado apenas em si mesmo. Cura [[@{selected|tvd}]] pontos de vida">
            <input type="hidden" name="attr_hab_dadocurar" value="**Curar - Ação** Usado apenas em si mesmo. Cura [[@{selected|da}]] pontos de vida">
            <input type="hidden" name="attr_hab_empurrar" value="**Empurrar - Ação** Empurra o alvo em [[4]] casas">
            <input type="hidden" name="attr_hab_puxar" value="**Puxar - Ação** Puxa o alvo em [[4]] casas">
            <input type="hidden" name="attr_hab_reagir" value="**Reagir - Reação** Ao ser atacado - utilize uma reação.">
            <input type="hidden" name="attr_hab_acrobacia" value="**Acrobacia - Reação** Não permite que usem reações">
            
            <input type="hidden" name="attr_hab_cobra" value="**Cobra - Ação** Causa [[@{selected|tat}]] de dano - puxa em [[4]] casas">
            <input type="hidden" name="attr_hab_urso" value="**Urso - Ação** Usado apenas em si mesmo. Recupera [[4 + (@{selected|vd} + @{selected|eq_vd} + @{selected|os_vd})]] pontos de vida">
            <input type="hidden" name="attr_hab_lobo" value="**Lobo - Buff** Usado apenas em si mesmo. Ganha [[2]] MV. Dura 4 turnos.">
            <input type="hidden" name="attr_hab_aguia" value="**Águia - Ação** Movimenta [[@{selected|tmv}]] casas levando um token adjacente com você.">
            <input type="hidden" name="attr_hab_touro" value="**Touro - Ação** Causa [[(@{selected|tat}) * 2]] de dano e empurra o alvo em [[6]] casas">
            <input type="hidden" name="attr_hab_escorpiao" value="**Escorpião - Ação** Causa [[(@{selected|tat}) * 2]] de dano e envenena o alvo. Ele perderá [[4]] PV por 2 turnos">
            <input type="hidden" name="attr_hab_tartaruga" value="**Tartaruga - Reação** Uma reação que concede [[2 + @{selected|df} + @{selected|os_df} + @{selected|bdf} - @{selected|ddf}]] de armadura.">
            
            <input type="hidden" name="attr_hab_fogo" value="**Fogo - Buff** Usado apenas em si mesmo. Alvos dentro do seu alcance perdem [[4]] PV. Dura 4 turnos">
            <input type="hidden" name="attr_hab_gelo" value="**Gelo - Ação/Debuff** Causa [[(@{selected|tat}) * 2]] de dano e congela o alvo. O MV do seu alvo será reduzido em [[2]] por 2 turnos">
            <input type="hidden" name="attr_hab_madeira" value="**Madeira - Reação** Uma reação que impede que você seja puxado ou empurrado. Os efeitos do ataque ainda funcionam contra você.">
            <input type="hidden" name="attr_hab_raio" value="**Raio - Reação** Uma reação que permite você se movimentar [[4]] casas ao ser atacado.">
            <input type="hidden" name="attr_hab_agua" value="**Água - Ação** Usado apenas em si mesmo. Diminui um contador de debuff em [[2]] turnos.">
            <input type="hidden" name="attr_hab_vento" value="**Vento - Ação** Empurra um alvo em [[6]] casas sem restrição de direção.">
            <input type="hidden" name="attr_hab_terra" value="**Pedra - Ação** Invoca [[2]] paredes de terra dentro do seu alcance. Cada uma possuirá [[ceil((2 + @{selected|df} + @{selected|os_df} + @{selected|bdf} - @{selected|ddf}) / 2)]] de PV. Buffs não passam por pedras.">
            
            <input type="hidden" name="attr_hab_gravidade" value="**Gravidade - Ação** Escolha entre puxar ou empurrar um alvo em [[4]] casas.">
            <input type="hidden" name="attr_hab_trocar" value="**Trocar - Ação** Troque de posição com um aliado em seu alcance.">
            <input type="hidden" name="attr_hab_tempo" value="**Parar - Buff** Usado apenas em si mesmo. Por [[2]] turnos - você não poderá receber nenhum debuff.">
            <input type="hidden" name="attr_hab_magnetismo" value="**Magnetizar - Buff/Debuff** Magnetiza um alvo ou a si mesmo. Tokens no alcance serão puxados ou repelidos em [[4]] casas por [[4]] turnos (escolha)">
            <input type="hidden" name="attr_hab_extender" value="**Extender - Ação** Aumenta o efeito de um contador em 2 turnos. Não pode ultrapassar o máximo de turnos já estabelecido pela habilidade.}}">
            <input type="hidden" name="attr_hab_portal" value="**Portal - Ação** Se movimente para qualquer lugar do mapa">
            <input type="hidden" name="attr_hab_retroceder" value="**Afastar - Ação** Uma reação que empurra o alvo em [[4]] casas">
            
            <input type="hidden" name="attr_hab_transferir" value="**Transferir - Ação** Transfere [[@{selected|tvd}]] de PV para um aliado">
            <input type="hidden" name="attr_hab_energia" value="**Conceder - Ação** Concede [[2]] de PO para um aliado">
            <input type="hidden" name="attr_hab_converter" value="**Converter - Ação** Com OS desativado - converta [[12]] de PV para [[4]] PO">
            <input type="hidden" name="attr_hab_regenerar" value="**Regenerar - Buff** Recupera [[@{selected|tvd}]] PV a cada turno. Dura [[4]] turnos">
            <input type="hidden" name="attr_hab_recuperar" value="**Recuperar - Ação** Anula [[1]] contador de debuff em qualquer aliado">
            <input type="hidden" name="attr_hab_barreira" value="**Barreira - Reação** Anula danos em trocad e PO. Cada PO gasto anula 3 pontos de dano">
            <input type="hidden" name="attr_hab_meditar" value="**Meditar - Buff** Com OS desativado e sem executar habilidades ofensivas - recupera [[3]] PO por turno. Dura [[4]] turnos">
            
            <input type="hidden" name="attr_hab_corpo" value="**Esqueleto - Ação** Invoca um aliado com 3 MV | 1 AL | [[(@{selected|tvd}) + 4]] PV | [[@{selected|tat}]] AT. Limite de 2.">
            <input type="hidden" name="attr_hab_resistencia" value="**Carcaça - Ação** Adiciona [[@{selected|tvd}]] de PV a um esqueleto ">
            <input type="hidden" name="attr_hab_dano" value="**Missão - Ação** Adiciona uma ação de ataque ao esqueleto. Máximo 6. Só é possível usar 4 de uma vez.">
            <input type="hidden" name="attr_hab_area" value="**Sentido - Ação** Aumenta o MV de um esqueleto em [[1]]. Máximo 8.">
            <input type="hidden" name="attr_hab_proteger" value="**Consciência - Ação** Adiciona [[1]] ação de proteger ao esqueleto. Quando seu personagem for atacado - o esqueleto receberá o dano - se desejar. Esqueleto precisa estar em seu alcance. Máximo 3.">
            <input type="hidden" name="attr_hab_reintegrar" value="**Reintegrar - Reação** Uma reação que é executada quando um esqueleto é derrotado.">
            <input type="hidden" name="attr_hab_combinar" value="**Combinar - Ação** Transfere as ações de [[1]] esqueleto para outro">
            
            <input type="hidden" name="attr_hab_liberar" value="**Liberar - Buff** Aumenta o ataque base de um alvo em [[2]]. Dura 4 turnos">
            <input type="hidden" name="attr_hab_restringir" value="**Restringir - Debuff** Reduz o ataque base de um alvo em [[2]]. Dura 4 turnos">
            <input type="hidden" name="attr_hab_voar" value="**Voar - Buff** O custo de alcance para acertarem seu personagem aumenta em [[2]]. Dura 4 turnos">
            <input type="hidden" name="attr_hab_corrente" value="**Corrente - Ação** Causa [[@{selected|tat}]] de dano em dois alvos diferentes ao seu alcance">
            <input type="hidden" name="attr_hab_defletir" value="**Defletir - Reação** Uma reação que causa um ataque de [[@{selected|tat}]]. Você ainda receberá o dano normalmente">
            <input type="hidden" name="attr_hab_expandir" value="**Expandir - Buff** Aumenta o alcance base de um alvo em [[3]]. Dura 4 turnos">
            <input type="hidden" name="attr_hab_cegar" value="**Cegar - Debuff** Reduz o alcance base de um alvo em [[3]]. Dura 4 turnos">        

            <input type="hidden" name="attr_hab_armadura" value="**Armadura - Buff** Aumenta a defesa base de um alvo em [[4]]. Dura 4 turnos">
            <input type="hidden" name="attr_hab_quebrar" value="**Quebrar - Debuff** Reduz a defesa base de um alvo em [[4]]. Dura 4 turnos">
            <input type="hidden" name="attr_hab_contra" value="**Contra-Ataque - Reação** Uma reação que causa [[@{selected|tat}]] de dano">
            <input type="hidden" name="attr_hab_espinhos" value="**Espinhos - Reação** Causa [[4]] de dano direto na vida do alvo que atacou">
            <input type="hidden" name="attr_hab_segundachance" value="**Segunda Chance - Buff** Ao receber um ataque mortal, fique com 1 de vida.">
            <input type="hidden" name="attr_hab_aliado" value="**Aliado - Reação** Uma reação que pode ser usada quando um aliado for atacado">
            <input type="hidden" name="attr_hab_reflexo" value="**Reflexo - Reação** Ao ser atacado com debuffs, escolha 1 deles para ser replicado ao atacante. Consome 2 PO.">

        </div>
    </div>
    <rolltemplate class="sheet-rolltemplate-shamanking">
        <div class="container">
            <table>
                <tr>
                   <th colspan="2">{{name}}</th>
                </tr>
                {{#imagem}}
                    <tr>
                        <th colspan="2">{{imagem}}</th>
                    </tr>
                {{/imagem}}
                {{#mensagem}}
                    <tr>
                        <td colspan="2">{{mensagem}}</td>
                    </tr>
                {{/mensagem}}
                {{#allprops() name imagem mensagem}}
                    <tr>
                       <td>{{key}}</td><td>{{value}}</td>
                    </tr>
                {{/allprops() name imagem mensagem}}
            </table>
        </div>
    </rolltemplate>
    <script type="text/worker">
    
    on("change:repeating_am", function(eventInfo) {
        let attr = eventInfo.sourceAttribute.split('_');
        
        const field = attr.pop();
        
        if (field.indexOf('am') == -1){
            attr = attr.join('_');
            
            let fieldnames = [ attr + "_at1", attr + "_at2", attr + "_at3", attr + "_at4", attr + "_at5", attr + "_at6", attr + "_nome", attr + "_custo", attr + "_turnos", attr + "_img" ];
            
            getAttrs(fieldnames, function(values) {
                let newAttrs = {};
                
                let nome = values[fieldnames[6]];
                let custo = values[fieldnames[7]];
                let turnos = values[fieldnames[8]];
                let img = values[fieldnames[9]];
                
                let template = ['/w @{selected|character_name} &{template:shamanking}'];
                
                let bonus = [];
                let bonus_at = 0;
                let bonus_mv = 0;
                let bonus_pv = 0;
                let bonus_al = 0;
                let bonus_df = 0;
                
                for (let i = 0; i < 6; i++){
                    if (values[fieldnames[i]]){
                        bonus.push('(' + values[fieldnames[i]] + ')');
                        
                        switch (values[fieldnames[i]]){
                            case 'AT': bonus_at++; break;
                            case 'MV': bonus_mv++; break;
                            case 'VD': bonus_pv++; break;
                            case 'AL': bonus_al++; break;
                            case 'DF': bonus_df++; break;
                        }
                    }
                }
                
                template.push(' !setattr --silent --charid @{selected|character_id} --last_os_custo|'+custo+' --last_os_img|'+img+' --last_os_duration|'+turnos+'|'+turnos+' --last_os_at|'+bonus_at+' --last_os_df|'+bonus_df+' --last_os_mv|'+bonus_mv+' --last_os_vd|'+bonus_pv+' --last_os_al|'+bonus_al+' --last_os_nome|'+nome+' !!! ');
                
                template.push('{{name='+nome+'}}');
                if (img){
                    template.push('{{imagem=[img]('+img+')}}');    
                }
                template.push('{{Duração='+turnos+' turnos}}');
                template.push('{{Custo='+custo+' PO}}');
                
                //template.push(' !setattr --charid @{selected|character_id} --silent --os_at|'+bonus_at+' --os_df|'+bonus_df+' --os_mv|'+bonus_mv+' --os_pv|'+bonus_pv+' --os_al|'+bonus_al+' !!!');
                
                bonus = bonus.join(' ');
                
                if (bonus){
                    template.push('{{Bônus='+bonus+'}}');
                }
                
                template.push('{{Ações=[Ativar](~selected|oversoul-ligar)}}');
                
                newAttrs[attr+'_roll'] = template.join('');
                newAttrs[attr+'_macro'] = '@{selected|'+attr+'_roll}';
                
                setAttrs(newAttrs);
            });
            
        }
    });
    
    </script>
</body>
</html>